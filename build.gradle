buildscript {
    repositories {
        maven {
            url = "https://repo.maven.apache.org/maven2"
        }
        maven {
            name = "forge"
            url = "https://files.minecraftforge.net/maven"
        }
        maven {
            name = "sonatype"
            url = "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath 'net.minecraftforge.gradle:ForgeGradle:1.2-SNAPSHOT'
    }
}

apply plugin: 'forge'
// Requires iChunUtil to run. Just put iChunUtil-deobf.jar in the /libs/ folder or it won't compile.
version = "5.0.0"
group= "twitchplays" 
archivesBaseName = "TwitchPlays"

minecraft {
    version = "1.7.10-10.13.2.1236"
    runDir = "eclipse"
}
configurations {
    embed
    compile.extendsFrom(embed)
}

dependencies {
    embed "org.pircbotx:pircbotx:2.1"
}

processResources
{
    // replace stuff in mcmod.info, nothing else
    from(sourceSets.main.resources.srcDirs) {
        include 'mcmod.info'
                
        // replace version and mcversion
        expand 'version':project.version, 'mcversion':project.minecraft.version
    }
        
    // copy everything else, thats not the mcmod.info
    from(sourceSets.main.resources.srcDirs) {
        exclude 'mcmod.info'
    }
}

jar {
	manifest {
		attributes 'FMLAT' : 'twitchplays_at.cfg'
	}
    from configurations.embed.collect { it.isDirectory() ? it : zipTree(it) }
}